# Zigbee2MQTT —Å MQTT Broker

–≠—Ç–æ—Ç –ø—Ä–æ–µ–∫—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç docker-compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é –¥–ª—è –∑–∞–ø—É—Å–∫–∞ Zigbee2MQTT —Å–æ–≤–º–µ—Å—Ç–Ω–æ —Å MQTT —Å–µ—Ä–≤–µ—Ä–æ–º (Eclipse Mosquitto) —Å –ø–æ–¥–¥–µ—Ä–∂–∫–æ–π –ø—Ä–æ—Ç–æ–∫–æ–ª–∞ MQTT 3.11 –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å –æ–±–ª–∞—á–Ω—ã–º MQTT –±—Ä–æ–∫–µ—Ä–æ–º.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

–î–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∑–∞–ø—É—Å–∫–∞ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ **[QUICK_START.md](QUICK_START.md)** - –ø–æ–ª–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –∑–∞ 5 –º–∏–Ω—É—Ç!

## –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

- **MQTT Broker**: Eclipse Mosquitto 2.0.18
- **Zigbee2MQTT**: 1.42.0 (–ø–æ—Å–ª–µ–¥–Ω—è—è —Å—Ç–∞–±–∏–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è –¥–æ 2.0)
- **–ü—Ä–æ—Ç–æ–∫–æ–ª**: MQTT 3.11
- **–û–±–ª–∞—á–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –ú–æ—Å—Ç –∫ –æ–±–ª–∞—á–Ω–æ–º—É MQTT –±—Ä–æ–∫–µ—Ä—É

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—Ä–æ–µ–∫—Ç–∞

```
zigbee-manager/
‚îú‚îÄ‚îÄ docker-compose.yml          # Docker Compose –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îú‚îÄ‚îÄ Makefile                    # –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è –∫–æ–º–∞–Ω–¥
‚îú‚îÄ‚îÄ env.example                 # –ü—Ä–∏–º–µ—Ä –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
‚îú‚îÄ‚îÄ .env                        # –í–∞—à–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (—Å–æ–∑–¥–∞–µ—Ç—Å—è –∏–∑ env.example)
‚îú‚îÄ‚îÄ templates/                  # –®–∞–±–ª–æ–Ω—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–π
‚îÇ   ‚îú‚îÄ‚îÄ mosquitto.conf.template
‚îÇ   ‚îú‚îÄ‚îÄ mosquitto-bridge.conf.template
‚îÇ   ‚îî‚îÄ‚îÄ zigbee2mqtt-config.yaml.template
‚îú‚îÄ‚îÄ mqtt/                       # MQTT Broker –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îú‚îÄ‚îÄ config/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ mosquitto.conf      # –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ bridge/
‚îÇ   ‚îÇ       ‚îî‚îÄ‚îÄ cloud-bridge.conf # –ú–æ—Å—Ç –∫ –æ–±–ª–∞—á–Ω–æ–º—É MQTT
‚îÇ   ‚îú‚îÄ‚îÄ data/                   # –î–∞–Ω–Ω—ã–µ MQTT
‚îÇ   ‚îî‚îÄ‚îÄ log/                    # –õ–æ–≥–∏ MQTT
‚îú‚îÄ‚îÄ zigbee2mqtt/                # Zigbee2MQTT –¥–∞–Ω–Ω—ã–µ
‚îÇ   ‚îî‚îÄ‚îÄ data/
‚îÇ       ‚îî‚îÄ‚îÄ configuration.yaml  # –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Zigbee2MQTT
‚îú‚îÄ‚îÄ scripts/                    # –í—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
‚îú‚îÄ‚îÄ backups/                    # –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏
‚îî‚îÄ‚îÄ docs/                       # –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

## üõ†Ô∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏

### –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

```bash
# –ü–æ–∫–∞–∑–∞—Ç—å —Å–ø—Ä–∞–≤–∫—É –ø–æ –∫–æ–º–∞–Ω–¥–∞–º
make help

# –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
make env                    # –°–æ–∑–¥–∞—Ç—å .env –∏–∑ env.example
make setup                  # –ü–æ–ª–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–∏—Å—Ç–µ–º—ã
make secure-setup           # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å –≥–µ–Ω–µ—Ä–∞—Ü–∏–µ–π –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏
make start                  # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
make stop                   # –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
make restart                # –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
make status                 # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
make logs                   # –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤

# –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
make detect                 # –û–±–Ω–∞—Ä—É–∂–∏—Ç—å Zigbee –∞–¥–∞–ø—Ç–µ—Ä—ã
make configure              # –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –ø–æ—Ä—Ç –∞–¥–∞–ø—Ç–µ—Ä–∞
make permissions            # –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞
make apply-group            # –ü—Ä–∏–º–µ–Ω–∏—Ç—å –≥—Ä—É–ø–ø—É dialout

# –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
make generate-configs       # –°–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
make config-check           # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

# –û–±–ª–∞—á–Ω—ã–π MQTT
make cloud-mqtt-credentials # –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —É—á–µ—Ç–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
make cloud-mqtt-enable      # –í–∫–ª—é—á–∏—Ç—å –æ–±–ª–∞—á–Ω—ã–π –º–æ—Å—Ç
make cloud-mqtt-disable     # –û—Ç–∫–ª—é—á–∏—Ç—å –æ–±–ª–∞—á–Ω—ã–π –º–æ—Å—Ç
make cloud-mqtt-status      # –°—Ç–∞—Ç—É—Å –æ–±–ª–∞—á–Ω–æ–≥–æ –º–æ—Å—Ç–∞
make cloud-mqtt-test        # –¢–µ—Å—Ç –æ–±–ª–∞—á–Ω–æ–≥–æ –º–æ—Å—Ç–∞

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞–º–∏
make permit-join-enable     # –í–∫–ª—é—á–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
make permit-join-disable    # –û—Ç–∫–ª—é—á–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤
make permit-join-status     # –°—Ç–∞—Ç—É—Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è —É—Å—Ç—Ä–æ–π—Å—Ç–≤
make monitor-devices        # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —É—Å—Ç—Ä–æ–π—Å—Ç–≤

# –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ
make backup                 # –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
make restore                # –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏
make backup-system          # –ü–æ–ª–Ω–∞—è —Ä–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è
make restore-system         # –ü–æ–ª–Ω–æ–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ

# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
make test-mqtt              # –¢–µ—Å—Ç MQTT –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è
make mqtt-subscribe         # –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —Ç–æ–ø–∏–∫–∏
make mqtt-publish           # –ü—É–±–ª–∏–∫–∞—Ü–∏—è —Å–æ–æ–±—â–µ–Ω–∏–π

# –û–±—Å–ª—É–∂–∏–≤–∞–Ω–∏–µ
make pull                   # –û–±–Ω–æ–≤–∏—Ç—å Docker –æ–±—Ä–∞–∑—ã
make clean                  # –û—á–∏—Å—Ç–∏—Ç—å –≤—Å–µ –¥–∞–Ω–Ω—ã–µ (–û–°–¢–û–†–û–ñ–ù–û!)
make info                   # –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Å–∏—Å—Ç–µ–º–µ
```

## üìö –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

- **[QUICK_START.md](QUICK_START.md)** - –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç –∑–∞ 5 –º–∏–Ω—É—Ç ‚ö°
- **[DOCKER_INSTALL.md](DOCKER_INSTALL.md)** - –£—Å—Ç–∞–Ω–æ–≤–∫–∞ Docker –∏ Docker Compose
- **[README_USER.md](README_USER.md)** - –ü–æ–¥—Ä–æ–±–Ω–æ–µ —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è —Å –ø—Ä–∏–º–µ—Ä–∞–º–∏ –∏ FAQ
- **[MIGRATION.md](MIGRATION.md)** - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –º–∏–≥—Ä–∞—Ü–∏–∏ —Å–∏—Å—Ç–µ–º—ã –Ω–∞ –Ω–æ–≤—ã–π —Ö–æ—Å—Ç
- **[MONITORING.md](MONITORING.md)** - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥—É —É—Å—Ç—Ä–æ–π—Å—Ç–≤

## üîß –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- **–û–°**: Linux (Ubuntu 20.04+, Debian 11+)
- **Docker**: 20.10+
- **Docker Compose**: 2.0+
- **Zigbee –∞–¥–∞–ø—Ç–µ—Ä**: CC2531, CC2538, CC2652P –∏–ª–∏ —Å–æ–≤–º–µ—Å—Ç–∏–º—ã–π (–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω)

## üåê –î–æ—Å—Ç—É–ø–Ω—ã–µ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å—ã

–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ —Å–∏—Å—Ç–µ–º—ã –¥–æ—Å—Ç—É–ø–Ω—ã:

- **MQTT Broker**: `mqtt://localhost:1883`
- **MQTT WebSocket**: `ws://localhost:9001`
- **Zigbee2MQTT Web UI**: `http://localhost:8083`

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –≥–µ–Ω–µ—Ä–∞—Ü–∏—è PAN ID, Extended PAN ID –∏ Network Key
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ TLS –¥–ª—è –æ–±–ª–∞—á–Ω–æ–≥–æ MQTT –º–æ—Å—Ç–∞
- –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–∞–≤–∞–º–∏ –¥–æ—Å—Ç—É–ø–∞ –∫ Zigbee –∞–¥–∞–ø—Ç–µ—Ä—É
- –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏

## ü§ù –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–î–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –ø–æ–º–æ—â–∏:
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ **[QUICK_START.md](QUICK_START.md)**
2. –ò–∑—É—á–∏—Ç–µ **[README_USER.md](README_USER.md)**
3. –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `make help` –¥–ª—è —Å–ø–∏—Å–∫–∞ –∫–æ–º–∞–Ω–¥
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `make logs`
